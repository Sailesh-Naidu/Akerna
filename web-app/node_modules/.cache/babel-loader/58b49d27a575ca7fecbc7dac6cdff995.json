{"ast":null,"code":"import React,{useEffect}from'react';import Select from'react-select';import{useSelector,useDispatch}from'react-redux';import{setStateProperty,fetchAllDrinks,resetState,fetchDrinksInSafeLimit}from\"../redux/drinks_actions\";import Quantity from\"./Quantity\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faRedoAlt}from\"@fortawesome/free-solid-svg-icons\";import\"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";import Loader from\"react-loader-spinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=function Search(){var _useSelector=useSelector(function(_ref){var drinks=_ref.drinks;return drinks;}),drinks=_useSelector.drinks,selectedDrink=_useSelector.selectedDrink,loading=_useSelector.loading,error=_useSelector.error,quantity=_useSelector.quantity;var dispatch=useDispatch();var selectedDrinkCaffeineLevel=selectedDrink.caffeine_per_serving&&selectedDrink.caffeine_per_serving*quantity;useEffect(function(){dispatch(fetchAllDrinks());},[dispatch]);var handleSelectChange=function handleSelectChange(selectedOption){dispatch(setStateProperty({property:'selectedDrink',payload:selectedOption}));dispatch(setStateProperty({property:'error',payload:null}));};var handleStateReset=function handleStateReset(){dispatch(resetState());dispatch(fetchAllDrinks());};var handleDrinkSubmit=function handleDrinkSubmit(){dispatch(fetchDrinksInSafeLimit(selectedDrink.value,quantity));};var options=drinks.map(function(item){return{value:item.id,label:item.name,caffeine_per_serving:item.caffeineAmount};});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"form\",{\"data-testid\":\"drinks-select\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"drinks\",className:\"font-semibold text-sm\",children:\"Choose your drink\"}),/*#__PURE__*/_jsx(Select,{inputId:\"drinks\",className:\"mt-2\",name:\"drinks\",value:selectedDrink,isLoading:loading,options:options,onChange:handleSelectChange})]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-6 mb-2 font-semibold text-sm\",children:\"Quantity\"}),/*#__PURE__*/_jsx(Quantity,{currentCaffeineLevel:selectedDrinkCaffeineLevel}),selectedDrink.caffeine_per_serving&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex justify-between\",children:[/*#__PURE__*/_jsx(\"button\",{\"data-testid\":\"submit-drink\",onClick:handleDrinkSubmit,type:\"submit\",className:\"text-center outline-none w-4/12 md:w-2/12 py-2 px-4 text-sm font-medium rounded text-white bg-pink-500 hover:bg-pink-700\",children:loading?/*#__PURE__*/_jsx(Loader,{className:\"inline-block\",type:\"Bars\",color:\"#fff\",height:20,width:20}):'Submit'}),/*#__PURE__*/_jsx(\"button\",{onClick:handleStateReset,type:\"submit\",className:\" w-2/12 xl:w-1/12 py-2 px-4 text-sm font-medium rounded text-white bg-pink-500 hover:bg-pink-700\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{className:\"text-xs\",icon:faRedoAlt})})]})]});};export default Search;","map":{"version":3,"sources":["/Users/saileshpola/Downloads/akerna-caffeine-app/web-app/src/components/Search.js"],"names":["React","useEffect","Select","useSelector","useDispatch","setStateProperty","fetchAllDrinks","resetState","fetchDrinksInSafeLimit","Quantity","FontAwesomeIcon","faRedoAlt","Loader","Search","drinks","selectedDrink","loading","error","quantity","dispatch","selectedDrinkCaffeineLevel","caffeine_per_serving","handleSelectChange","selectedOption","property","payload","handleStateReset","handleDrinkSubmit","value","options","map","item","id","label","name","caffeineAmount"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAAQC,gBAAR,CAA0BC,cAA1B,CAA0CC,UAA1C,CAAsDC,sBAAtD,KAAmF,yBAAnF,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,OAASC,eAAT,KAA+B,gCAA/B,CACA,OAASC,SAAT,KAA0B,mCAA1B,CACA,MAAO,+DAAP,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,C,wFAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnB,iBAA0DV,WAAW,CAAC,kBAAEW,CAAAA,MAAF,MAAEA,MAAF,OAAcA,CAAAA,MAAd,EAAD,CAArE,CAAOA,MAAP,cAAOA,MAAP,CAAeC,aAAf,cAAeA,aAAf,CAA8BC,OAA9B,cAA8BA,OAA9B,CAAuCC,KAAvC,cAAuCA,KAAvC,CAA8CC,QAA9C,cAA8CA,QAA9C,CACA,GAAMC,CAAAA,QAAQ,CAAGf,WAAW,EAA5B,CAEA,GAAMgB,CAAAA,0BAA0B,CAAGL,aAAa,CAACM,oBAAd,EAAsCN,aAAa,CAACM,oBAAd,CAAqCH,QAA9G,CAEAjB,SAAS,CAAC,UAAM,CACdkB,QAAQ,CAACb,cAAc,EAAf,CAAR,CACD,CAFQ,CAEN,CAACa,QAAD,CAFM,CAAT,CAIA,GAAMG,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,cAAD,CAAoB,CAC7CJ,QAAQ,CAACd,gBAAgB,CAAC,CAACmB,QAAQ,CAAE,eAAX,CAA4BC,OAAO,CAAEF,cAArC,CAAD,CAAjB,CAAR,CACAJ,QAAQ,CAACd,gBAAgB,CAAC,CAACmB,QAAQ,CAAE,OAAX,CAAoBC,OAAO,CAAE,IAA7B,CAAD,CAAjB,CAAR,CACD,CAHD,CAKA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC7BP,QAAQ,CAACZ,UAAU,EAAX,CAAR,CACAY,QAAQ,CAACb,cAAc,EAAf,CAAR,CACD,CAHD,CAKA,GAAMqB,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CAC9BR,QAAQ,CAACX,sBAAsB,CAACO,aAAa,CAACa,KAAf,CAAsBV,QAAtB,CAAvB,CAAR,CACD,CAFD,CAIA,GAAMW,CAAAA,OAAO,CAAGf,MAAM,CAACgB,GAAP,CAAW,SAAAC,IAAI,CAAI,CACjC,MAAO,CACLH,KAAK,CAAEG,IAAI,CAACC,EADP,CAELC,KAAK,CAAEF,IAAI,CAACG,IAFP,CAGLb,oBAAoB,CAAEU,IAAI,CAACI,cAHtB,CAAP,CAKD,CANe,CAAhB,CAOA,mBACE,oCACE,cAAM,cAAY,eAAlB,wBACE,cAAO,OAAO,CAAC,QAAf,CAAwB,SAAS,CAAC,uBAAlC,+BADF,cAEE,KAAC,MAAD,EAAQ,OAAO,CAAC,QAAhB,CAAyB,SAAS,CAAC,MAAnC,CAA0C,IAAI,CAAC,QAA/C,CAAwD,KAAK,CAAEpB,aAA/D,CAA8E,SAAS,CAAEC,OAAzF,CAAkG,OAAO,CAAEa,OAA3G,CAAoH,QAAQ,CAAEP,kBAA9H,EAFF,GADF,cAME,UAAG,SAAS,CAAC,iCAAb,sBANF,cAOE,KAAC,QAAD,EAAU,oBAAoB,CAAEF,0BAAhC,EAPF,CAUIL,aAAa,CAACM,oBAAd,eACA,aAAK,SAAS,CAAC,2BAAf,wBACE,eAAQ,cAAY,cAApB,CAAmC,OAAO,CAAEM,iBAA5C,CAA+D,IAAI,CAAC,QAApE,CAA6E,SAAS,CAAC,0HAAvF,UAEIX,OAAO,cACP,KAAC,MAAD,EACE,SAAS,CAAC,cADZ,CAEE,IAAI,CAAC,MAFP,CAGE,KAAK,CAAC,MAHR,CAIE,MAAM,CAAE,EAJV,CAKE,KAAK,CAAE,EALT,EADO,CAQP,QAVJ,EADF,cAeE,eAAQ,OAAO,CAAEU,gBAAjB,CAAmC,IAAI,CAAC,QAAxC,CAAiD,SAAS,CAAC,kGAA3D,uBACE,KAAC,eAAD,EAAiB,SAAS,CAAC,SAA3B,CAAqC,IAAI,CAAEf,SAA3C,EADF,EAfF,GAXJ,GADF,CAkCD,CAjED,CAmEA,cAAeE,CAAAA,MAAf","sourcesContent":["import React, {useEffect} from 'react'\nimport Select from 'react-select'\nimport { useSelector, useDispatch } from 'react-redux'\nimport {setStateProperty, fetchAllDrinks, resetState, fetchDrinksInSafeLimit} from \"../redux/drinks_actions\";\nimport Quantity from \"./Quantity\";\nimport { FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport { faRedoAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport Loader from \"react-loader-spinner\";\n\nconst Search = () => {\n  const {drinks, selectedDrink, loading, error, quantity} = useSelector(({drinks}) => drinks)\n  const dispatch = useDispatch();\n\n  const selectedDrinkCaffeineLevel = selectedDrink.caffeine_per_serving && selectedDrink.caffeine_per_serving * quantity\n\n  useEffect(() => {\n    dispatch(fetchAllDrinks())\n  }, [dispatch])\n\n  const handleSelectChange = (selectedOption) => {\n    dispatch(setStateProperty({property: 'selectedDrink', payload: selectedOption}))\n    dispatch(setStateProperty({property: 'error', payload: null}))\n  }\n\n  const handleStateReset = () => {\n    dispatch(resetState())\n    dispatch(fetchAllDrinks())\n  }\n\n  const handleDrinkSubmit = () => {\n    dispatch(fetchDrinksInSafeLimit(selectedDrink.value, quantity))\n  }\n\n  const options = drinks.map(item => {\n    return {\n      value: item.id,\n      label: item.name,\n      caffeine_per_serving: item.caffeineAmount\n    }\n  })\n  return (\n    <div>\n      <form data-testid=\"drinks-select\">\n        <label htmlFor=\"drinks\" className=\"font-semibold text-sm\">Choose your drink</label>\n        <Select inputId=\"drinks\" className=\"mt-2\" name=\"drinks\" value={selectedDrink} isLoading={loading} options={options} onChange={handleSelectChange} />\n      </form>\n\n      <p className=\"mt-6 mb-2 font-semibold text-sm\">Quantity</p>\n      <Quantity currentCaffeineLevel={selectedDrinkCaffeineLevel} />\n\n      {\n        selectedDrink.caffeine_per_serving &&\n        <div className=\"mt-6 flex justify-between\">\n          <button data-testid=\"submit-drink\" onClick={handleDrinkSubmit} type=\"submit\" className=\"text-center outline-none w-4/12 md:w-2/12 py-2 px-4 text-sm font-medium rounded text-white bg-pink-500 hover:bg-pink-700\">\n            {\n              loading ?\n              <Loader\n                className=\"inline-block\"\n                type=\"Bars\"\n                color=\"#fff\"\n                height={20}\n                width={20}\n              /> :\n              'Submit'\n            }\n          </button>\n\n          <button onClick={handleStateReset} type=\"submit\" className=\" w-2/12 xl:w-1/12 py-2 px-4 text-sm font-medium rounded text-white bg-pink-500 hover:bg-pink-700\">\n            <FontAwesomeIcon className=\"text-xs\" icon={faRedoAlt} />\n          </button>\n        </div>\n      }\n    </div>\n  )\n}\n\nexport default Search\n"]},"metadata":{},"sourceType":"module"}